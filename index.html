<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="jigar sable, portfolio, jigar, full stack dev, personal portfolio lifecodes, portfolio design, portfolio website, personal portfolio" />
    <meta name="description" content="Welcome to Jigar's Portfolio. Full-Stack Web Developer and Android App Developer" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./assets/css/style.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Favicon -->
    <link id='favicon' rel="shortcut icon" href="./assets/images/logo.png" type="image/x-png">
    <title>Portfolio | LuyDev</title>
</head>
<body oncontextmenu="return false">

<!-- pre loader -->
<!-- <div class="loader-container">
  <img draggable="false" src="./assets/images/preloader.gif" alt="">
</div> -->

<!-- navbar starts -->
<header>
        <a href="/" class="logo"><i class="fas fa-user-secret"></i> LuyDev</a>

        <div id="menu" class="fas fa-bars"></div>
        <nav class="navbar">
            <ul>
            <li><a class="active" href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#skills">Skills</a></li>
            <li><a href="#education">Education</a></li>
            <li><a href="#work">Work</a></li>
            <li><a href="#experience">Experience</a></li>
            <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
</header>
<!-- navbar ends -->


<!-- hero section starts -->
<section class="home" id="home">
    <div id="particles-js"></div>

    <div class="content">
    <h2>Hi There,<br/> I'm Sengluy<span>(LuyDev)</span></h2>
    <p>i am into <span class="typing-text"></span></p>
    <a href="#about" class="btn"><span>About Me</span>
      <i class="fas fa-arrow-circle-down"></i>
    </a>
    <div class="socials">
        <ul class="social-icons">
          
          <li><a class="github" aria-label="GitHub" href="https://github.com/Devbaic" target="_blank"><i class="fab fa-github"></i></a></li>
          <li><a class="linkedin" aria-label="LinkedIn" href="https://www.facebook.com/share/1CxemmwjWY/" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
          <li><a class="telegram" aria-label="Telegram" href="https://t.me/TheMiracle_man" target="_blank"><i class="fab fa-telegram-plane"></i></a></li>
          <li><a class="instagram" aria-label="Instagram" href="https://www.instagram.com/marraluy?igsh=YWo1OGx4Z3EwZnIz"><i class="fab fa-instagram" target="_blank"></i></a></li>
          
        </ul>
      </div>
    </div>
<div class="image">
    <img draggable="false" class="tilt" src="./assets/images/image (1).png" alt="">
</div>
</section>
<!-- hero section ends -->


<!-- about section starts -->
<section class="about" id="about">
    <h2 class="heading"><i class="fas fa-user-alt"></i> About <span>Me</span></h2>
    
    <div class="row">

    <div class="image">
        <img draggable="false" class="tilt" src="./assets/images/me.jpg" alt="">
    </div>
    <div class="content">
        <h3>I'm LuyDev</h3>
        <span class="tag">Full Stack Developer</span>
        
        <p>I am a Full-Stack Developer. 
          I am an Information Technology (ITI).
          I am very passionate about improving my coding skills & developing applications & websites.
          I build Websites using Laravel In My work.
          Working for myself to improve my skills.
          Love to build Full-Stack clones. </p>
        
        <div class="box-container">
            <!-- <div class="box">
              <p><span> age: </span> 20</p>
              <p><span> phone : </span> +855 XXX-XXX-XXXX</p>
            </div> -->
            <div class="box">
              <p><span> email : </span> maracleboy@gmail.com</p>
              <p><span> place : </span> Touk Tla, Cambodia - 168</p>
            </div>
        </div>
        
        <div class="resumebtn">
            <a href="./assets/images/Persional CV (1).pdf" target="_blank" class="btn" download><span>Resume</span>
                <i class="fas fa-chevron-right"></i>
            </a>
        </div>

    </div>
    </div>
</section>
<!-- about section ends -->

<!-- skills section starts -->
<section class="skills" id="skills">

    <h2 class="heading"><i class="fas fa-laptop-code"></i> Skills & <span>Abilities</span></h2>

    <div class="container">
          <div class="row" id="skillsContainer">

            <!-- <div class="bar">
              <div class="info">
                <img src="https://img.icons8.com/color/48/000000/adobe-xd.png"/>
                <span>AdobeXD</span>
              </div>
            </div> -->

      </div>
</div>
</section>
<!-- skills section ends -->


<!-- education section starts -->
<section class="education" id="education">

  <h1 class="heading"><i class="fas fa-graduation-cap"></i> My <span>Education</span></h1>

    <p class="qoute">Education is not the learning of facts, but the training of the mind to think.</p>

    <div class="box-container">

    <div class="box">
        <div class="image">
        <img draggable="false" src="./assets/images/educat/iti.jpg" alt="">
        </div>
        <div class="content">
        <h3>Industrial Technical Institute (ITI) | Bachelor of Information Technology</h3>
        <p>Programming Web-design Graphics design</p>
        <h4>2024-2025 | Completed</h4>
        </div>
    </div>

    <div class="box">
      <div class="image">
      <img draggable="false" src="./assets/images/educat/ntti.jpg" alt="">
      </div>
      <div class="content">
      <h3>National Technical Training Institute (NTTI)</h3>
      <p>Web-Development</p>
      <h4>2026- Present </h4>
      </div>
    </div>

</div>
</section>
<!-- education section ends -->


<!-- work project section starts -->
<section class="work" id="work">

  <h2 class="heading"><i class="fas fa-laptop-code"></i>Basic <span>Projects </span></h2>

  <div class="box-container">

    <!-- <div class="box tilt">
      <img draggable="false" src="./assets/images/projects/portfolio1.PNG" alt="" />
      <div class="content">
        <div class="tag">
        <h3>Portfolio Website</h3>
        </div>
        <div class="desc">
          <p>Personal portfolio website. Don't need much info about it, just scroll down. You're here only!</p>
          <div class="btns">
            <a href="#" class="btn" target="_blank"><i class="fas fa-eye"></i> View</a>
            <a href="https://github.com/jigar-sable/Portfolio-Website" class="btn" target="_blank">Code <i class="fas fa-code"></i></a>
          </div>
        </div>
      </div>
    </div> -->

</div>

<div class="viewall">
  <a href="/projects" class="btn"><span>View All</span>
    <i class="fas fa-arrow-right"></i>
</a>
</div>

</section>
<!-- work project section ends -->

<!-- experience section starts -->
<section class="experience" id="experience">

  <h2 class="heading"><i class="fas fa-briefcase"></i> Experience </h2>

  <div class="timeline">

    <div class="container right">
        <div class="content">
          <div class="tag">
            <h2>Ministry of Labour and Vocational Training</h2>
          </div>
          <div class="desc">
              <h3>Back-end Developer</h3>
              <p>2025-Present</p>
          </div>
        </div>
      </div>

    <div class="container left">
      <div class="content">
        <div class="tag">
          <h2>Networking</h2>
        </div>
        <div class="desc">
            <h3>Network Engineer</h3>
            <p>2025 July- August 2026</p>
        </div>
      </div>
    </div>

    <div class="container right">
      <div class="content">
        <div class="tag">
          <h2>The group of participants, teachers and
          students present at INDUSTRIAL TECHNICAL
          INSTTTUTE
          </h2>
        </div>
        <div class="desc">
            <h3>Work at School</h3>
            <p>2024-2025</p>
        </div>
      </div>
    </div>

    <div class="container left">
      <div class="content">
        <div class="tag">
          <h2>DOCUMENTATION CENTER OF CAMBODIA</h2>
        </div>
        <div class="desc">
            <h3>History about Cambodia</h3>
            <p>2022-2023</p>
        </div>
      </div>
    </div>

    <div class="container right">
      <div class="content">
        <div class="tag">
          <h2>Cambodian Red Cross</h2>
        </div>
        <div class="desc">
            <h3>About Education</h3>
            <p>2022-2023</p>
        </div>
      </div>
    </div>

   <div class="container left">
        <div class="content">
          <div class="tag">
            <h2>Union of Youth Federations of Cambodia</h2>
          </div>
          <div class="desc">
              <h3>Union of Youth Federations of Cambodia</h3>
              <p>2022-2023</p>
          </div>
        </div>
      </div>
  </div>

  <div class="morebtn">
    <a href="/experience" class="btn"><span>View All</span>
      <i class="fas fa-arrow-right"></i>
  </a>
  </div>

</div>

</section>
<!-- experience section ends -->

<!-- contact section starts -->
<section class="contact" id="contact">
  
  <h2 class="heading"><i class="fas fa-headset"></i> Get in <span>Touch</span></h2>

  <div class="container">
    <div class="content">
      <div class="image-box">
        <img draggable="false" src="./assets/images/contact1.png" alt="">
      </div>
    <form id="contact-form">
      <div class="form-group">
        <div class="field">
          <input type="text" name="name" id="name" placeholder="Name" required>
          <i class='fas fa-user'></i>
        </div>
        <div class="field">
          <input type="text" name="email" id="email" placeholder="Email" required>
          <i class='fas fa-envelope'></i>
        </div>
        <div class="field">
          <input type="text" name="title" id="title" placeholder="Title" required>
          <i class="fas fa-scroll"></i>
        </div>
        <div class="message">
        <textarea placeholder="Message" name="message" name="message" required></textarea>
        <i class="fas fa-comment-dots"></i>
        </div>
        </div>
      <div class="button-area">
        <button type="submit">
          Submit <i class="fa fa-paper-plane"></i></button>
      </div>
    </form>
  </div>
  </div>
</section>
<!-- contact section ends -->


<!-- footer section starts -->
<section class="footer">

  <div class="box-container">

      <div class="box">
          <h3>Devluy's Portfolio</h3>
          <p>Thank you for visiting my personal portfolio website. Connect with me over socials. <br/> <br/> Keep Rising ðŸš€. Connect with me over live chat!</p>
      </div>

      <div class="box">
          <h3>quick links</h3>
          <a href="#home"><i class="fas fa-chevron-circle-right"></i> home</a>
          <a href="#about"><i class="fas fa-chevron-circle-right"></i> about</a>
          <a href="#skills"><i class="fas fa-chevron-circle-right"></i> skills</a>
          <a href="#education"><i class="fas fa-chevron-circle-right"></i> education</a>
          <a href="#work"><i class="fas fa-chevron-circle-right"></i> work</a>
          <a href="#experience"><i class="fas fa-chevron-circle-right"></i> experience</a>
      </div>

      <div class="box">
          <h3>contact info</h3>
          <p> <i class="fas fa-phone"></i>+855 XXX-XXX-XX</p>
          <p> <i class="fas fa-envelope"></i>Phnom Penh, Cambodia-168</p>
          <div class="share">

              
              <a href="https://github.com/Devbaic" class="fab fa-github" aria-label="GitHub" target="_blank"></a>
              <a href="https://www.facebook.com/share/1CxemmwjWY/" class="fab fa-facebook-f" aria-label="Telegram" target="_blank"></a>
              <a href="https://t.me/TheMiracle_man" class="fab fa-telegram-plane" aria-label="Telegram" target="_blank"></a>

          </div>
      </div>
  </div>

  <h1 class="credit">Designed with <i class="fa fa-heart pulse"></i> by <a href="https://www.linkedin.com/in/jigar-sable"> SengLuy</a></h1>

</section>
<!-- footer section ends -->


<!-- scroll top btn -->
<a href="#home" aria-label="ScrollTop" class="fas fa-angle-up" id="scroll-top"></a>
<!-- scroll back to top -->


<!-- ==== ALL MAJOR JAVASCRIPT CDNS STARTS ==== -->
<!-- jquery cdn -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- typed.js cdn -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.5/typed.min.js" integrity="sha512-1KbKusm/hAtkX5FScVR5G36wodIMnVd/aP04af06iyQTkD17szAMGNmxfNH+tEuFp3Og/P5G32L1qEC47CZbUQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- particle.js links -->
<script src="./assets/js/particles.min.js"></script>
<script src="./assets/js/app.js"></script>

<!-- vanilla tilt.js links -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js" integrity="sha512-SttpKhJqONuBVxbRcuH0wezjuX+BoFoli0yPsnrAADcHsQMW8rkR84ItFHGIkPvhnlRnE2FaifDOUw+EltbuHg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- scroll reveal anim -->
<script src="https://unpkg.com/scrollreveal"></script>

<script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"
    ></script>

<!-- ==== ALL MAJOR JAVASCRIPT CDNS ENDS ==== -->

<script src="./assets/js/script.js"></script>
<canvas id="canvas"></canvas>
  
  <!-- Hidden div for card design -->
  <div id="cardDesign">
    <svg width="512" height="744" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="bgGrad" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" style="stop-color:#2d3561;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#1a1f3a;stop-opacity:1" />
        </linearGradient>
      </defs>
      
      <!-- Background -->
      <rect width="512" height="744" fill="url(#bgGrad)"/>
      
      <!-- Accent stripe -->
      <rect width="512" height="100" fill="#4a90e2"/>
      
      <!-- Company name -->
      <text x="256" y="60" font-family="Arial" font-size="32" font-weight="bold" fill="white" text-anchor="middle">TECH</text>
      
      <!-- Photo frame -->
      <rect x="156" y="130" width="200" height="200" fill="#3a4268"/>
      <image href="image.png" x="156" y="130" width="200" height="200" />
      <rect x="156" y="130" width="200" height="200" fill="none" stroke="#4a90e2" stroke-width="3"/>
      
      <!-- Name -->
      <text x="256" y="380" font-family="Arial" font-size="32" font-weight="bold" fill="white" text-anchor="middle">KHORN SENGLUY</text>
      
      <!-- Title -->
      <text x="256" y="420" font-family="Arial" font-size="24" fill="#a0a8cc" text-anchor="middle">Senior Developer</text>
      
      <!-- ID Number -->
      <text x="256" y="470" font-family="Arial" font-size="20" fill="white" text-anchor="middle">ID: TC-2024-1337</text>
      
      <!-- Department -->
      <text x="256" y="510" font-family="Arial" font-size="18" fill="#7a82a8" text-anchor="middle">Web Department</text>
      
      <!-- Barcode -->
      <rect x="100" y="580" width="6" height="60" fill="white"/>
      <rect x="110" y="580" width="6" height="40" fill="white"/>
      <rect x="120" y="580" width="6" height="60" fill="white"/>
      <rect x="130" y="580" width="6" height="40" fill="white"/>
      <rect x="140" y="580" width="6" height="60" fill="white"/>
      <rect x="150" y="580" width="6" height="60" fill="white"/>
      <rect x="160" y="580" width="6" height="40" fill="white"/>
      <rect x="170" y="580" width="6" height="60" fill="white"/>
      <rect x="180" y="580" width="6" height="40" fill="white"/>
      <rect x="190" y="580" width="6" height="60" fill="white"/>
      <rect x="200" y="580" width="6" height="60" fill="white"/>
      <rect x="210" y="580" width="6" height="40" fill="white"/>
      <rect x="220" y="580" width="6" height="60" fill="white"/>
      <rect x="230" y="580" width="6" height="40" fill="white"/>
      <rect x="240" y="580" width="6" height="60" fill="white"/>
      <rect x="250" y="580" width="6" height="40" fill="white"/>
      <rect x="260" y="580" width="6" height="60" fill="white"/>
      <rect x="270" y="580" width="6" height="60" fill="white"/>
      <rect x="280" y="580" width="6" height="40" fill="white"/>
      <rect x="290" y="580" width="6" height="60" fill="white"/>
      <rect x="300" y="580" width="6" height="40" fill="white"/>
      <rect x="310" y="580" width="6" height="60" fill="white"/>
      <rect x="320" y="580" width="6" height="40" fill="white"/>
      <rect x="330" y="580" width="6" height="60" fill="white"/>
      <rect x="340" y="580" width="6" height="60" fill="white"/>
      <rect x="350" y="580" width="6" height="40" fill="white"/>
      <rect x="360" y="580" width="6" height="60" fill="white"/>
      <rect x="370" y="580" width="6" height="40" fill="white"/>
      <rect x="380" y="580" width="6" height="60" fill="white"/>
      <rect x="390" y="580" width="6" height="40" fill="white"/>
      
      <!-- Footer -->
      <text x="256" y="680" font-family="Arial" font-size="16" fill="#4a90e2" text-anchor="middle">Access Level: Premium</text>
    </svg>
  </div>

  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/"
      }
    }
  </script>

  <script type="module">
    import * as THREE from 'three';

    // Setup
    const canvas = document.getElementById('canvas');
    const scene = new THREE.Scene();
    scene.background = null; // Transparent background
    
    const camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, 0, 12);
    
    const renderer = new THREE.WebGLRenderer({ 
      canvas, 
      antialias: true,
      alpha: true, // Enable transparency
      preserveDrawingBuffer: true // For transparency
    });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    renderer.setClearColor(0x000000, 0); // Transparent background
    
    // Enable depth testing for proper rendering order
    renderer.sortObjects = true;
    
    // Lighting - reduced intensity for better visibility on transparent background
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
    scene.add(ambientLight);
    
    const directionalLight1 = new THREE.DirectionalLight(0xffffff, 1.0);
    directionalLight1.position.set(5, 5, 5);
    directionalLight1.castShadow = true;
    scene.add(directionalLight1);
    
    const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.6);
    directionalLight2.position.set(-3, 2, -2);
    scene.add(directionalLight2);

    // Physics simulation
    class PhysicsBody {
      constructor(position, mass = 1, fixed = false) {
        this.position = position.clone();
        this.velocity = new THREE.Vector3();
        this.force = new THREE.Vector3();
        this.mass = mass;
        this.fixed = fixed;
        this.damping = 0.97;
      }
      
      applyForce(force) {
        this.force.add(force);
      }
      
      update(dt) {
        if (this.fixed) return;
        
        const acceleration = this.force.clone().divideScalar(this.mass);
        this.velocity.add(acceleration.multiplyScalar(dt));
        this.velocity.multiplyScalar(this.damping);
        this.position.add(this.velocity.clone().multiplyScalar(dt));
        this.force.set(0, 0, 0);
      }
    }

    // Create physics bodies for cable segments
    const gravity = new THREE.Vector3(0, -35, 0);
    const fixed = new PhysicsBody(new THREE.Vector3(0, 5, 0), 1, true);
    const j1 = new PhysicsBody(new THREE.Vector3(0, 4.5, 0));
    const j2 = new PhysicsBody(new THREE.Vector3(0, 4, 0));
    const j3 = new PhysicsBody(new THREE.Vector3(0, 3.5, 0));
    const j4 = new PhysicsBody(new THREE.Vector3(0, 3, 0));
    const card = new PhysicsBody(new THREE.Vector3(0, 2.5, 0), 2.5);
    
    const bodies = [j1, j2, j3, j4, card];
    
    // Spring constraints
    function applySpringConstraint(body1, body2, restLength, stiffness = 600, damping = 12) {
      const delta = new THREE.Vector3().subVectors(body2.position, body1.position);
      const distance = delta.length();
      const force = delta.normalize().multiplyScalar((distance - restLength) * stiffness);
      
      const relativeVelocity = new THREE.Vector3().subVectors(body2.velocity, body1.velocity);
      const dampingForce = relativeVelocity.multiplyScalar(damping);
      force.add(dampingForce);
      
      if (!body1.fixed) body1.applyForce(force);
      if (!body2.fixed) body2.applyForce(force.clone().negate());
    }

    // Create ID Card
    const cardGroup = new THREE.Group();
    
    // Card base
    const cardGeometry = new THREE.BoxGeometry(2.2, 3.2, 0.04);
    
    // Create canvas for card texture with embedded photo
    const canvas2d = document.createElement('canvas');
    canvas2d.width = 512;
    canvas2d.height = 744;
    const ctx = canvas2d.getContext('2d');

    // Create texture from canvas first
    const cardTexture = new THREE.CanvasTexture(canvas2d);

    // Load your photo
    const userPhoto = new Image();
    userPhoto.crossOrigin = 'anonymous';
    
    function drawCard() {
      // Clear canvas with transparent background
      ctx.clearRect(0, 0, 512, 744);
      
      // Background gradient
  

      // Accent stripe
      ctx.fillStyle = '#4a90e2';
      ctx.fillRect(0, 0, 512, 100);

      // Company name
      ctx.fillStyle = 'black';
      ctx.font = 'bold 32px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('TECHCORP', 256, 60);

      // Photo frame background
      ctx.fillStyle = '#3a4268';
      ctx.fillRect(156, 130, 200, 200);
      
      // Draw user photo
      if (userPhoto.complete && userPhoto.naturalWidth > 0) {
        ctx.save();
        ctx.beginPath();
        ctx.rect(156, 130, 200, 200);
        ctx.clip();
        
        const imgAspect = userPhoto.width / userPhoto.height;
        let drawWidth, drawHeight, offsetX, offsetY;
        
        if (imgAspect > 1) {
          drawHeight = 200;
          drawWidth = drawHeight * imgAspect;
          offsetX = 156 - (drawWidth - 200) / 2;
          offsetY = 130;
        } else {
          drawWidth = 200;
          drawHeight = drawWidth / imgAspect;
          offsetX = 156;
          offsetY = 130 - (drawHeight - 200) / 2;
        }
        
        ctx.drawImage(userPhoto, offsetX, offsetY, drawWidth, drawHeight);
        ctx.restore();
      }
      
      // Photo frame border
      ctx.strokeStyle = '#4a90e2';
      ctx.lineWidth = 3;
      ctx.strokeRect(156, 130, 200, 200);

      // Name
      ctx.fillStyle = 'white';
      ctx.font = 'bold 32px Arial';
      ctx.fillText('KHORN SENGLUY', 256, 380);

      // Title
      ctx.font = '24px Arial';
      ctx.fillStyle = '#a0a8cc';
      ctx.fillText('Back-end Developer', 256, 420);

      // ID Number
      ctx.font = '20px Arial';
      ctx.fillText('ID: TC-2024-1337', 256, 470);

      // Department
      ctx.fillStyle = '#7a82a8';
      ctx.font = '18px Arial';
      ctx.fillText('Web Department', 256, 510);

      // Barcode
      ctx.fillStyle = 'white';
      for (let i = 0; i < 30; i++) {
        const x = 100 + i * 10;
        const h = Math.random() > 0.5 ? 40 : 60;
        ctx.fillRect(x, 580, 6, h);
      }

      // Footer
      ctx.fillStyle = '#4a90e2';
      ctx.font = '16px Arial';
      ctx.fillText('Access Level: Premium', 256, 680);
      
      // Update Three.js texture
      cardTexture.needsUpdate = true;
    }

    // Initial draw
    drawCard();

    // Load photo and redraw when ready
    userPhoto.onload = function() {
      drawCard();
    };
    userPhoto.src = 'image.png';
    
    const cardMaterial = new THREE.MeshStandardMaterial({
      map: cardTexture,
      roughness: 0.3,
      metalness: 0.1,
      transparent: false
    });
    
    const cardMesh = new THREE.Mesh(cardGeometry, cardMaterial);
    cardMesh.castShadow = true;
    cardMesh.receiveShadow = true;
    // Ensure card renders in front of cable
    cardMesh.renderOrder = 1;
    cardGroup.add(cardMesh);

    // Card hole for cable
    const holeGeometry = new THREE.CylinderGeometry(0.08, 0.08, 0.06, 16);
    const holeMaterial = new THREE.MeshStandardMaterial({
      color: 0x333333,
      roughness: 0.8,
      metalness: 0.5
    });
    const hole = new THREE.Mesh(holeGeometry, holeMaterial);
    hole.rotation.x = Math.PI / 2;
    hole.position.set(0, 1.5, 0);
    hole.renderOrder = 2; // Render hole on top
    cardGroup.add(hole);

    cardGroup.position.copy(card.position);
    scene.add(cardGroup);

    // Cable visualization - render behind card
    const cableSegments = 1;
    const cableCurve = new THREE.CatmullRomCurve3([
      fixed.position.clone(),
      j1.position.clone(),
      j2.position.clone(),
      j3.position.clone(),
      j4.position.clone(),
      card.position.clone().add(new THREE.Vector3(0, 1.5, -0.05)) // Move cable slightly behind card
    ]);

    const tubeGeometry = new THREE.TubeGeometry(cableCurve, cableSegments, 0.05, 8, false);
    const cableMaterial = new THREE.MeshStandardMaterial({
      color: 0x2a2a2a,
      roughness: 0.7,
      metalness: 0.3
    });
    const cable = new THREE.Mesh(tubeGeometry, cableMaterial);
    cable.castShadow = true;
    cable.renderOrder = 0; // Render cable first (behind everything)
    scene.add(cable);

    // Cable clip at top
    const clipGeometry = new THREE.CylinderGeometry(0.15, 0.15, 0.25, 16);
    const clipMaterial = new THREE.MeshStandardMaterial({
      color: 0x333333,
      roughness: 0.5,
      metalness: 0.6
    });
    const clip = new THREE.Mesh(clipGeometry, clipMaterial);
    clip.position.copy(fixed.position);
    clip.castShadow = true;
    clip.renderOrder = 0; // Render clip with cable
    scene.add(clip);

    // Create a separate group for cable elements to ensure they render behind
    const cableGroup = new THREE.Group();
    cableGroup.add(cable);
    cableGroup.add(clip);
    cableGroup.renderOrder = 0;
    scene.add(cableGroup);

    // Interaction
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    let dragging = false;
    let dragOffset = new THREE.Vector3();

    canvas.addEventListener('mousemove', (e) => {
      mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
      
      raycaster.setFromCamera(mouse, camera);
      const intersects = raycaster.intersectObject(cardMesh);
      
      const isHovered = intersects.length > 0;
      canvas.style.cursor = isHovered ? (dragging ? 'grabbing' : 'grab') : 'auto';
      
      if (dragging) {
        const planeNormal = new THREE.Vector3(0, 0, 1);
        const plane = new THREE.Plane(planeNormal, 0);
        const target = new THREE.Vector3();
        raycaster.ray.intersectPlane(plane, target);
        
        if (target) {
          card.position.copy(target).sub(dragOffset);
          card.velocity.set(0, 0, 0);
        }
      }
    });

    canvas.addEventListener('mousedown', () => {
      raycaster.setFromCamera(mouse, camera);
      const intersects = raycaster.intersectObject(cardMesh);
      
      if (intersects.length > 0) {
        dragging = true;
        dragOffset.copy(intersects[0].point).sub(card.position);
      }
    });

    canvas.addEventListener('mouseup', () => {
      dragging = false;
    });

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // Animation loop
    const clock = new THREE.Clock();
    
    function animate() {
      requestAnimationFrame(animate);
      
      const dt = Math.min(clock.getDelta(), 0.016);
      
      // Apply gravity
      if (!dragging) {
        bodies.forEach(body => {
          if (!body.fixed) {
            body.applyForce(gravity.clone().multiplyScalar(body.mass));
          }
        });
      }
      
      // Apply spring constraints
      const segmentLength = 0.5;
      applySpringConstraint(fixed, j1, segmentLength, 800, 15);
      applySpringConstraint(j1, j2, segmentLength, 800, 15);
      applySpringConstraint(j2, j3, segmentLength, 800, 15);
      applySpringConstraint(j3, j4, segmentLength, 800, 15);
      applySpringConstraint(j4, card, segmentLength, 800, 15);
      
      // Update physics
      bodies.forEach(body => body.update(dt));
      
      // Update card position and rotation
      cardGroup.position.copy(card.position);
      
      const rotationFactor = 0.08;
      cardGroup.rotation.z = -card.velocity.x * rotationFactor;
      cardGroup.rotation.x = card.velocity.y * rotationFactor * 0.3;
      
      // Update cable - ensure it stays behind the card
      cableCurve.points[0].copy(fixed.position);
      cableCurve.points[1].copy(j1.position);
      cableCurve.points[2].copy(j2.position);
      cableCurve.points[3].copy(j3.position);
      cableCurve.points[4].copy(j4.position);
      // Position cable endpoint slightly behind the card
      cableCurve.points[5].copy(card.position).add(new THREE.Vector3(0, 1.5, -0.05));
      
      cable.geometry.dispose();
      cable.geometry = new THREE.TubeGeometry(cableCurve, cableSegments, 0.03, 8, false);
      
      // Update clip position
      clip.position.copy(fixed.position);
      
      renderer.render(scene, camera);
    }
    
    animate();
  </script>
</body>
</html>
